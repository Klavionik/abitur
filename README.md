# Парсер данных о поступающих в московские вузы

## Личный проект, июнь 2020 г.

### Описание

Проект создан в помощь абитуриенту, поступающему в вуз. Требовалось отслеживать несколько 
PDF-файлов, обновляющихся ежедневно и содержащих информацию о поступающих в два московских вуза, 
минимально анализировать ее и собирать это в простую и наглядную таблицу. 
По ходу работы была добавлена возможность для "клиента" самостоятельно добавлять в таблицу отметки напротив отдельных студентов.

Сейчас проект крутится на живом сервере и приносит пользу и добро заказчику.

![Скриншот с рабочего сервера](https://i.imgur.com/6sRc8Om.png)

### Что было сделано

Сначала был создан прототип для проверки того, насколько реально вообще парсить нужное из PDF-файлов.
Когда идея была проверена и прототип заработал, началась переработка кода в более приличный вид. 
Трудностей добавляло то, что структура и формат самих PDF-файлов меняется едва ли не ежедневно,
и логику приходилось постоянно дорабатывать (и наверняка придется еще не раз до окончания приема заявлений).

После нескольких итераций получили следующее: вся сложная работа абстрагирована в модуль `crawler.py`, опирающийся на три класса-парсера в `parsers.py`. Была сделана скромная попытка приладить
asyncio и мультипроцессинг, что здорово уменьшило время работы парсера - с 20+ до 7 секунд.

В файл-шаблон `abitur.html` было вписано немного JavaScript для минимальной интерактивности,
сделана форма для выбора отображения записей в таблице за различные периоды.

### Что можно улучшить

Парсерам местами не хватает читаемости и DRY - это касается `clean_rows` и `parse_tables`.
Разумеется, не хватает тестов. Было бы здорово добавить Celery и Redis и избавить пользователя
от необходимости тыкать "Обновление" и ждать, но проект намеренно был сделан минималистично.
По той же причине не использован, например, jQuery. 

### Установка

`$ git clone https://github.com/Klavionik/vkinder.git`  
`$ cd abitur`  
`$ pip install -r requirements.txt`  
`$ ./manage.py migrate`  
`$ ./manage.py createcachetable`

Миграция добавит две записи в базу данных - два вуза, с которым будет работать приложение.

### Использование

- Запуск  
  `$ ./manage.py runserver`

- Тесты  
  Тестов пока нет, но обязательно будут. :(

